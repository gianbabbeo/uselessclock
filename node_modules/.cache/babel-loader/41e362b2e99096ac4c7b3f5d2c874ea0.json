{"ast":null,"code":"import _slicedToArray from\"C:/xampp/htdocs/uselessclock/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _classCallCheck from\"C:/xampp/htdocs/uselessclock/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/xampp/htdocs/uselessclock/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/xampp/htdocs/uselessclock/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/xampp/htdocs/uselessclock/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UselessClock=/*#__PURE__*/function(_Component){_inherits(UselessClock,_Component);var _super=_createSuper(UselessClock);function UselessClock(){var _this;_classCallCheck(this,UselessClock);_this=_super.call(this);_this.state={apiUri:'http://worldtimeapi.org/api/timezone/',local:'',current:[],times:[]};return _this;}_createClass(UselessClock,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var localUri=this.state.apiUri.concat(Intl.DateTimeFormat().resolvedOptions().timeZone.toString());Promise.all([fetch(this.state.apiUri),fetch(localUri)]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),r1=_ref2[0],r2=_ref2[1];return Promise.all([r1.json(),r2.json()]);}).then(function(_ref3){var _ref4=_slicedToArray(_ref3,2),times=_ref4[0],current=_ref4[1];_this2.setState({times:times});var currJ=JSON.parse(JSON.stringify(current,['timezone','datetime']));//why elements in this object can't be manipulated like strings?\nvar a=JSON.stringify(currJ.timezone).split('/')[1];//workaround\nvar b=JSON.stringify(currJ.datetime).split('T')[1];var currA=[a.substring(0,a.length-1),b.substring(0,8)];_this2.setState({current:currA});});}},{key:\"handleTimeChange\",value:function handleTimeChange(e){var _this3=this;var currUri=this.state.apiUri.concat(e.target.value.toLowerCase());fetch(currUri).then(function(response){return response.json();}).then(function(time){var currJ=JSON.parse(JSON.stringify(time,['timezone','datetime']));//why elements in this object can't be manipulated like strings?\nvar a=JSON.stringify(currJ.timezone).split('/')[1];//workaround\nvar b=JSON.stringify(currJ.datetime).split('T')[1];var currA=[a.substring(0,a.length-1),b.substring(0,8)];_this3.setState({current:currA});});}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/_jsxs(\"div\",{id:\"Container\",className:\"container-sm\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"Header\",className:\"row\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"display-1\",children:\"A Useless Clock\"})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{id:\"CurrentTime\",className:\"row\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Nel fuso \",this.state.current[0],\" sono le \",this.state.current[1]]})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{id:\"TimeZones\",className:\"row\",children:/*#__PURE__*/_jsx(\"form\",{name:\"SelectTimeZone\",onChange:function onChange(e){return _this4.handleTimeChange(e);},children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"small\",children:\"Scegli il tuo fuso orario\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"TimeZone\",className:\"form-select form-select-lg mb-3\",\"aria-label\":\".form-select-lg example\",children:[/*#__PURE__*/_jsx(\"option\",{defaultValue:true,children:\"Seleziona...\"}),this.state.times.map(function(time){return/*#__PURE__*/_jsx(\"option\",{value:time.toString(),children:time.toString()},time.toString());})]})]})})})]});}}]);return UselessClock;}(Component);export default UselessClock;","map":{"version":3,"names":["React","Component","UselessClock","state","apiUri","local","current","times","localUri","concat","Intl","DateTimeFormat","resolvedOptions","timeZone","toString","Promise","all","fetch","then","r1","r2","json","setState","currJ","JSON","parse","stringify","a","timezone","split","b","datetime","currA","substring","length","e","currUri","target","value","toLowerCase","response","time","handleTimeChange","map"],"sources":["C:/xampp/htdocs/uselessclock/src/UselessClock.js"],"sourcesContent":["import React, { Component } from 'react';\n\nclass UselessClock extends Component\n{\n    constructor()\n    {\n        super();\n        this.state = \n        {\n          apiUri: 'http://worldtimeapi.org/api/timezone/',\n          local: '',\n          current: [],\n          times: []\n        };\n    }\n\n    componentDidMount()\n    {\n      const localUri = this.state.apiUri.concat(Intl.DateTimeFormat().resolvedOptions().timeZone.toString());\n\n      Promise.all([ fetch(this.state.apiUri), fetch(localUri) ])\n        .then(([r1, r2]) =>\n            {\n                return Promise.all([ r1.json(), r2.json() ]);\n            })\n        .then(([times, current]) => \n            {\n              this.setState({times: times});\n              const currJ = JSON.parse(JSON.stringify(current, ['timezone', 'datetime'])); //why elements in this object can't be manipulated like strings?\n              const a = JSON.stringify(currJ.timezone).split('/')[1]; //workaround\n              const b = JSON.stringify(currJ.datetime).split('T')[1];\n              const currA = [a.substring(0, a.length-1), b.substring(0, 8)]; \n              this.setState({current: currA});\n            }); \n    }\n\n    handleTimeChange(e)\n    {\n      const currUri = this.state.apiUri.concat(e.target.value.toLowerCase());\n      fetch(currUri)\n      .then(response =>\n          {\n              return response.json();\n          })\n      .then(time => \n          {\n            const currJ = JSON.parse(JSON.stringify(time, ['timezone', 'datetime'])); //why elements in this object can't be manipulated like strings?\n            const a = JSON.stringify(currJ.timezone).split('/')[1]; //workaround\n            const b = JSON.stringify(currJ.datetime).split('T')[1];\n            const currA = [a.substring(0, a.length-1), b.substring(0, 8)]; \n            this.setState({current: currA});\n          });\n    }\n\n    render()\n    {\n      return(\n        <div id=\"Container\" className=\"container-sm\">\n          <div id=\"Header\" className=\"row\">\n            <h1 className=\"display-1\">A Useless Clock</h1>\n          </div>\n          \n          <hr />\n          \n          <div id=\"CurrentTime\" className=\"row\">\n            <p>Nel fuso {this.state.current[0]} sono le {this.state.current[1]}</p>\n          </div>\n\n          <hr />\n          \n          <div id=\"TimeZones\" className=\"row\">\n            <form name=\"SelectTimeZone\" onChange={(e) => this.handleTimeChange(e)}>\n              <label>\n                <p className=\"small\">Scegli il tuo fuso orario</p>\n                <select name=\"TimeZone\" className=\"form-select form-select-lg mb-3\" aria-label=\".form-select-lg example\">\n                <option defaultValue>Seleziona...</option>\n                  {\n                    this.state.times.map( (time) => (\n                      <option key={time.toString()} value={time.toString()}>{time.toString()}</option>\n                    ))\n                  }\n                </select>\n              </label>\n            </form>\n          </div>\n        </div>\n      );\n    }\n}\n\nexport default UselessClock;"],"mappings":"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"},"metadata":{},"sourceType":"module"}